<div class="relative container mx-auto px-4 py-8">
  <!-- Linha central da timeline -->
  <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1 bg-gray-200 h-full"></div>

  <% if @timeline_items.present? %>
    <% @timeline_items.each_with_index do |item, index| %>
      <div class="relative flex items-center justify-between w-full mb-10">
        <% if index.even? %>
          <!-- Bloco no lado esquerdo -->
          <div class="w-5/12">
            <div class="p-6 bg-white rounded-lg shadow-lg border-l-4 <%= item[:type] == :event ? 'border-blue-500' : 'border-green-500' %>">
              <p class="text-sm text-gray-500">
                <%# Mostra a data, para eventos ou metas %>
                <%= item[:type] == :event ? item[:date].strftime('%d/%m/%Y') : "Meta para: #{item[:date].strftime('%d/%m/%Y')}" %>
              </p>
              <h3 class="text-lg font-semibold text-gray-900"><%= item[:title] %></h3>
              <p class="text-gray-700"><%= item[:description] %></p>

              <% if item[:type] == :event %>
                <!-- Exibe o tipo do evento -->
                <p class="mt-2 text-sm text-blue-500">Tipo: <%= item[:event_type].presence || 'Sem categoria' %></p>
              <% else %>
                <!-- Exibe o progresso da meta -->
                <% if item[:achieved] %>
                  <p class="mt-2 text-sm text-green-500">Meta concluÃ­da! ðŸŽ‰</p>
                <% else %>
                  <% if item[:kind] == 'numeric' %>
                    <p class="mt-2 text-sm text-yellow-500">Progresso: <%= item[:current_value] %> / <%= item[:numeric_value] %></p>
                  <% else %>
                    <p class="mt-2 text-sm text-yellow-500">Meta ainda em progresso.</p>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>

        <!-- Ponto central -->
        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-8 <%= item[:type] == :event ? 'bg-blue-500' : 'bg-green-500' %> rounded-full flex items-center justify-center shadow-md">
          <% if item[:type] == :event %>
            <i class="fas fa-calendar text-white"></i>
          <% else %>
            <i class="fas fa-flag-checkered text-white"></i>
          <% end %>
        </div>

        <% unless index.even? %>
          <!-- Bloco no lado direito -->
          <div class="w-5/12 ml-auto">
            <div class="p-6 bg-white rounded-lg shadow-lg border-r-4 <%= item[:type] == :event ? 'border-blue-500' : 'border-green-500' %>">
              <p class="text-sm text-gray-500">
                <%= item[:type] == :event ? item[:date].strftime('%d/%m/%Y') : "Meta para: #{item[:date].strftime('%d/%m/%Y')}" %>
              </p>
              <h3 class="text-lg font-semibold text-gray-900"><%= item[:title] %></h3>
              <p class="text-gray-700"><%= item[:description] %></p>

              <% if item[:type] == :event %>
                <p class="mt-2 text-sm text-blue-500">Tipo: <%= item[:event_type].presence || 'Sem categoria' %></p>
              <% else %>
                <% if item[:achieved] %>
                  <p class="mt-2 text-sm text-green-500">Meta concluÃ­da! ðŸŽ‰</p>
                <% else %>
                  <% if item[:kind] == 'numeric' %>
                    <p class="mt-2 text-sm text-yellow-500">Progresso: <%= item[:current_value] %> / <%= item[:numeric_value] %></p>
                  <% else %>
                    <p class="mt-2 text-sm text-yellow-500">Meta ainda em progresso.</p>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <p class="text-gray-500 text-center">Nenhum evento ou meta disponÃ­vel para exibir na timeline.</p>
  <% end %>
</div>
